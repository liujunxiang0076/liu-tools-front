# JSON格式化工具 - 树形视图优化

## ✨ 新功能

### 1. **可交互的树形视图**
- 🌲 每个对象和数组都可以点击折叠/展开
- 🎯 点击三角形按钮即可切换展开状态
- 📊 默认展开前2层，更深层次自动折叠

### 2. **视图模式切换**
- 🌳 **树形视图**: 可交互的树形结构，方便浏览复杂JSON
- 💻 **代码视图**: 传统的代码高亮显示，带行号

### 3. **视觉优化**
- 🎨 语法高亮：键名、字符串、数字、布尔值、null值都有不同颜色
- 🔍 悬停效果：鼠标悬停时行背景高亮
- 📏 缩进层次：清晰的视觉层级
- 💡 折叠预览：显示项目数量（如 "...5 keys" 或 "...3 items"）

### 4. **用户体验**
- ⚡ 流畅动画：展开/折叠时有平滑的过渡效果
- 🎯 精确控制：每个节点独立控制，可展开任意组合
- 📱 响应式设计：适配移动端和桌面端

## 🎯 使用方法

### 基本操作
1. **输入JSON**：在左侧输入区域粘贴或输入JSON数据
2. **自动格式化**：系统会自动验证和格式化
3. **切换视图**：点击右上角的"树形"或"代码"按钮切换视图
4. **折叠/展开**：点击树形视图中的三角形按钮

### 树形视图特性
- **三角形箭头** `▶`：点击展开/折叠节点
- **键名高亮** (蓝色)：对象的属性名
- **值类型高亮**：
  - 🟢 字符串 (绿色背景)
  - 🟠 数字 (橙色背景)
  - 🟣 布尔值 (紫色背景)
  - ⚪ null (灰色斜体)
- **折叠预览**：`{...5 keys}` 或 `[...3 items]`

### 代码视图特性
- **行号显示**：可点击行号定位
- **语法高亮**：完整的JSON语法着色
- **复制/下载**：轻松导出格式化的JSON

## 🔧 技术实现

### 组件结构
```
JsonTreeView.vue (容器组件)
└── JsonTreeNode.vue (递归节点组件)
    └── JsonTreeNode.vue (子节点)
        └── ...
```

### 核心特性
- **递归渲染**：自动处理任意深度的JSON结构
- **智能折叠**：根据深度自动决定初始展开状态
- **性能优化**：仅渲染可见节点，避免大JSON卡顿
- **类型安全**：完整的TypeScript类型定义

### 样式设计
- **现代风格**：圆角、背景色、悬停效果
- **清晰层级**：通过缩进和连接线表示层级关系
- **颜色系统**：统一的配色方案，深色/浅色主题适配

## 🎨 UI示例

### 树形视图
```
▼ root: {
  ▼ user: {
      name: "张三"
      age: 25
    ▶ address: {...3 keys}
    ▶ hobbies: [...3 items]
  }
}
```

### 代码视图
```json
{
  "user": {
    "name": "张三",
    "age": 25,
    "address": {
      "city": "北京"
    }
  }
}
```

## 📊 对比优势

### 树形视图 vs 传统代码视图

| 特性 | 树形视图 | 代码视图 |
|------|---------|---------|
| 浏览复杂JSON | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 折叠控制 | 每个节点独立 | 按级别统一 |
| 交互性 | 高度交互 | 静态显示 |
| 代码复制 | 需要切换 | 直接复制 |
| 学习曲线 | 直观易用 | 熟悉的格式 |

## 🚀 适用场景

### 最适合树形视图
- ✅ 深层嵌套的复杂JSON
- ✅ API响应数据浏览
- ✅ 配置文件检查
- ✅ 数据结构探索

### 最适合代码视图
- ✅ 复制完整JSON
- ✅ 检查格式细节
- ✅ 语法验证
- ✅ 传统开发习惯

## 💡 使用建议

1. **复杂数据**：优先使用树形视图快速定位和浏览
2. **简单数据**：使用代码视图更直观
3. **组合使用**：先用树形视图浏览结构，再用代码视图复制数据
4. **性能考虑**：超大JSON（>100KB）建议使用代码视图

## 🎯 快捷操作

- `点击三角形`：折叠/展开节点
- `点击行号`：跳转到指定行（代码视图）
- `切换视图`：在工具栏点击"树形"或"代码"按钮

## 🔄 未来优化计划

- [ ] 搜索和过滤功能
- [ ] 展开/折叠全部快捷键
- [ ] 节点路径复制
- [ ] 虚拟滚动支持超大JSON
- [ ] 导出选定节点
- [ ] 节点编辑功能

---

**更新日期**: 2024-11-20
**版本**: 2.0.0
**作者**: 开发团队
